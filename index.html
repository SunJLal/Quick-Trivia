<!DOCTYPE HTML>
<html>
	<head>
		<title>Fresh Trivia</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">
		<!-- Wrapper -->
			<div id="wrapper">
				<!-- Header -->
					<div id="header">
						<div class="content">
							<p id="category"></p>
							<div class="inner">
								<h1 id="question" ></h1>
							</div>
							<p id="difficulty"></p>
						</div>
						<nav>
							<ul class="answers" id="answers">
							</ul>
						</nav>
					</div>
					<div id="notes">
					</div>
			</div>
			<div id="bg"></div>
		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
			<script>
				//shuffle function
				function shuffle(array) {
				  var currentIndex = array.length, temporaryValue, randomIndex;
				  while (0 !== currentIndex) {
				    randomIndex = Math.floor(Math.random() * currentIndex);
				    currentIndex -= 1;
				    temporaryValue = array[currentIndex];
				    array[currentIndex] = array[randomIndex];
				    array[randomIndex] = temporaryValue;
				  }
				  return array;
				}
				//trivia request
				$.getJSON('https://opentdb.com/api.php?amount=1', function(data) {
					//Category
					var category = data.results[0].category;
					$("#category").html(category);;
					//Question
					var question = data.results[0].question;
					$("#question").html(question);
					//Difficulty
					var difficulty = data.results[0].difficulty;
					$("#difficulty").html(difficulty);
					//creating Answers array
					var correctAnswer = data.results[0].correct_answer;
					console.log("correct = "+correctAnswer);
					var answers = data.results[0].incorrect_answers;
					answers.push(correctAnswer);
					answers = shuffle(answers);
					console.log(answers);
					var answerList = $("ul.answers");
					answerList.add(answerList);
					answers.forEach(function (item) {
					    var li = document.createElement('li');
					    var link = document.createElement('a');
					    answerList.append(li);
					    li.append(link);
					    //li.innerHTML += item;
					    link.innerHTML += item;
					    link.label += item;
					    //check answer
						$("#answers").on('click','li',function(){
							var selectedAnswer = $(this).text();
							if(selectedAnswer === correctAnswer) {
								document.getElementById("question").style.color = '#0cff00';
							} else {
								document.getElementById("question").style.color = '#ff3333';
							}			
						});
					});
				});
			</script>


	</body>
</html>
